<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°±ë ¹ê°ë¦¬êµíšŒ ì£¼ë³´ ê´€ë¦¬ì</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            border-left: 5px solid #667eea;
        }

        .section-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            content: 'âš™ï¸';
            margin-right: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #495057;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        .worship-items {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .worship-item {
            display: grid;
            grid-template-columns: 2fr 1fr auto;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .worship-item input[type="text"] {
            padding: 8px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
        }

        .worship-item input[type="checkbox"] {
            width: auto;
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .add-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
        }

        .financial-items {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .financial-item {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .news-items {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .news-item {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .save-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .preview-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin-right: 15px;
            text-decoration: none;
            display: inline-block;
        }

        .preview-btn:hover {
            background: #138496;
            text-decoration: none;
            color: white;
        }

        .button-group {
            text-align: center;
            margin-top: 30px;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #c3e6cb;
            display: none;
        }

        @media (max-width: 768px) {
            .form-row,
            .form-row-3 {
                grid-template-columns: 1fr;
            }
            
            .worship-item,
            .financial-item,
            .news-item {
                grid-template-columns: 1fr;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ë°±ë ¹ê°ë¦¬êµíšŒ ì£¼ë³´ ê´€ë¦¬ì</h1>
            <p>ì£¼ë³´ ë‚´ìš©ì„ ìˆ˜ì •í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”</p>
            <button onclick="adminLogout()" style="position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 8px 15px; border-radius: 20px; cursor: pointer; font-size: 12px;">ë¡œê·¸ì•„ì›ƒ</button>
        </div>

        <div class="content">
            <div class="success-message" id="successMessage">
                âœ… ë³€ê²½ì‚¬í•­ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!
            </div>

            <form id="bulletinForm">
                <!-- ê¸°ë³¸ ì •ë³´ -->
                <div class="section">
                    <h2 class="section-title">ê¸°ë³¸ ì •ë³´</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="churchName">êµíšŒëª…</label>
                            <input type="text" id="churchName" name="churchName" value="ë°±ë ¹ê°ë¦¬êµíšŒ">
                        </div>
                        <div class="form-group">
                            <label for="churchSubtitle">êµíšŒ ë¶€ì œëª©</label>
                            <input type="text" id="churchSubtitle" name="churchSubtitle" value="ê¸°ë…êµ ëŒ€í•œê°ë¦¬íšŒ â€¢ METHODIST CHURCH BAENGNYEONG">
                        </div>
                    </div>
                    <div class="form-row-3">
                        <div class="form-group">
                            <label for="volume">ê¶Œìˆ˜</label>
                            <input type="text" id="volume" name="volume" value="ì œ2ê¶Œ 32í˜¸">
                        </div>
                        <div class="form-group">
                            <label for="date">ë‚ ì§œ</label>
                            <input type="text" id="date" name="date" value="2025ë…„ 8ì›” 31ì¼">
                        </div>
                        <div class="form-group">
                            <label for="pastor">ë‹´ì„ëª©ì‚¬</label>
                            <input type="text" id="pastor" name="pastor" value="ì •ì¬í™”">
                        </div>
                    </div>
                </div>

                <!-- ì˜ˆë°° ì •ë³´ -->
                <div class="section">
                    <h2 class="section-title">ì˜ˆë°° ì •ë³´</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="worshipTime">ì˜ˆë°° ì‹œê°„</label>
                            <input type="text" id="worshipTime" name="worshipTime" value="ì˜¤ì „ 11ì‹œ">
                        </div>
                        <div class="form-group">
                            <label for="worshipLeader">ì¸ë„ì</label>
                            <input type="text" id="worshipLeader" name="worshipLeader" value="ì •ì¬í™” ëª©ì‚¬">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="scripture">ì„±ê²½ë´‰ë…</label>
                            <input type="text" id="scripture" name="scripture" value="ìš”í•œë³µìŒ 10ì¥ 10ì ˆ">
                        </div>
                        <div class="form-group">
                            <label for="sermon">ì„¤êµ ì œëª©</label>
                            <input type="text" id="sermon" name="sermon" value="ì§„ì •í•œ ë³µì´ë€?">
                        </div>
                    </div>
                    
                    <label>ì˜ˆë°° ìˆœì„œ</label>
                    <div class="worship-items" id="worshipItems">
                        <!-- ì˜ˆë°° ìˆœì„œ í•­ëª©ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                    <button type="button" class="add-btn" onclick="addWorshipItem()">ì˜ˆë°° ìˆœì„œ ì¶”ê°€</button>
                </div>

                <!-- í—Œê¸ˆ ë‚´ì—­ -->
                <div class="section">
                    <h2 class="section-title">í—Œê¸ˆ ë‚´ì—­</h2>
                    <div class="form-group">
                        <label for="financialMonth">í—Œê¸ˆ ì›”</label>
                        <input type="text" id="financialMonth" name="financialMonth" value="8ì›”">
                    </div>
                    
                    <label>í—Œê¸ˆ í•­ëª©</label>
                    <div class="financial-items" id="financialItems">
                        <!-- í—Œê¸ˆ í•­ëª©ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                    <button type="button" class="add-btn" onclick="addFinancialItem()">í—Œê¸ˆ í•­ëª© ì¶”ê°€</button>
                    
                    <div class="form-group">
                        <label for="bankAccount">í—Œê¸ˆ ê³„ì¢Œ</label>
                        <input type="text" id="bankAccount" name="bankAccount" value="ë†í˜‘ 351-1328-3733-53 (ê¸°ë…êµëŒ€í•œê°ë¦¬íšŒ ë°±ë ¹êµíšŒ)">
                    </div>
                </div>

                <!-- êµíšŒ ì†Œì‹ -->
                <div class="section">
                    <h2 class="section-title">êµíšŒ ì†Œì‹</h2>
                    <div class="news-items" id="newsItems">
                        <!-- êµíšŒ ì†Œì‹ í•­ëª©ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                    <button type="button" class="add-btn" onclick="addNewsItem()">ì†Œì‹ ì¶”ê°€</button>
                </div>

                <!-- ì—°ë½ì²˜ ì •ë³´ -->
                <div class="section">
                    <h2 class="section-title">ì—°ë½ì²˜ ì •ë³´</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="address">ì£¼ì†Œ</label>
                            <input type="text" id="address" name="address" value="ì¸ì²œê´‘ì—­ì‹œ ì˜¹ì§„êµ° ë°±ë ¹ë©´ ì§„ì´Œë¦¬ 311-3">
                        </div>
                        <div class="form-group">
                            <label for="phone">ì „í™”ë²ˆí˜¸</label>
                            <input type="text" id="phone" name="phone" value="032) 836-7401">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mobile">íœ´ëŒ€í°</label>
                            <input type="text" id="mobile" name="mobile" value="010-4804-3124">
                        </div>
                        <div class="form-group">
                            <label for="established">ì„¤ë¦½ì¼</label>
                            <input type="text" id="established" name="established" value="2024ë…„ 10ì›” 15ì¼">
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <a href="index.html" class="preview-btn" target="_blank">ë¯¸ë¦¬ë³´ê¸°</a>
                    <button type="submit" class="save-btn">ë³€ê²½ì‚¬í•­ ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Security check - redirect if not authenticated
        function checkAuthentication() {
            const isAuthenticated = sessionStorage.getItem('adminAuthenticated');
            const authTime = sessionStorage.getItem('adminAuthTime');
            const currentTime = new Date().getTime();
            
            // Check if user is authenticated and session is still valid (1 hour)
            if (!isAuthenticated || !authTime || (currentTime - parseInt(authTime)) > 3600000) {
                // Clear any existing session data
                sessionStorage.removeItem('adminAuthenticated');
                sessionStorage.removeItem('adminAuthTime');
                
                // Redirect to main page
                alert('ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. ë©”ì¸ í˜ì´ì§€ì—ì„œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
                window.location.href = 'index.html';
                return false;
            }
            return true;
        }
        
        // Check authentication when page loads
        if (!checkAuthentication()) {
            // Stop script execution if not authenticated
            throw new Error('Unauthorized access');
        }
        
        // Add logout functionality
        function adminLogout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                sessionStorage.removeItem('adminAuthenticated');
                sessionStorage.removeItem('adminAuthTime');
                alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
                window.location.href = 'index.html';
            }
        }
        
        // Auto-logout after 1 hour of inactivity
        let inactivityTimer;
        
        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            inactivityTimer = setTimeout(() => {
                alert('ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
                adminLogout();
            }, 3600000); // 1 hour
        }
        
        // Reset timer on user activity
        document.addEventListener('mousemove', resetInactivityTimer);
        document.addEventListener('keypress', resetInactivityTimer);
        document.addEventListener('click', resetInactivityTimer);
        
        // Start the inactivity timer
        resetInactivityTimer();

        // ì´ˆê¸° ë°ì´í„°
        const initialWorshipItems = [
            { item: "ê²½ë°°ì™€ ì°¬ì–‘", leader: "ë‹¤í•¨ê»˜", standing: false },
            { item: "ì¡°ìš©í•œ ê¸°ë„ (ì˜ˆë°°ë¡œ ì´ˆëŒ€)", leader: "ì¸ë„ì", standing: false },
            { item: "ì°¬ì†¡ 80ì¥", leader: "ë‹¤í•¨ê»˜", standing: true },
            { item: "ì„±ì‹œêµë… 74í¸", leader: "ë‹¤í•¨ê»˜", standing: true },
            { item: "ì‹ ì•™ê³ ë°±", leader: "ë‹¤í•¨ê»˜", standing: true },
            { item: "ì°¬ì†¡ 427ì¥", leader: "ë‹¤í•¨ê»˜", standing: false },
            { item: "ëª©íšŒê¸°ë„", leader: "ì¸ë„ì", standing: false },
            { item: "êµíšŒì†Œì‹ (ì£¼ë³´ì™€ í™”ë©´)", leader: "ì¸ë„ì", standing: false },
            { item: "ë´‰í—Œê¸°ë„", leader: "ì¸ë„ì", standing: false },
            { item: "ì„±ì°¬ (ì£¼ë‹˜ì˜ ì‹íƒìœ¼ë¡œ ì´ˆëŒ€)", leader: "ì¸ë„ì", standing: true },
            { item: "ì„±ê²½ë´‰ë… - ìš”í•œë³µìŒ 10ì¥ 10ì ˆ", leader: "ë‹¤í•¨ê»˜", standing: false },
            { item: "ì„¤êµ - ì§„ì •í•œ ë³µì´ë€?", leader: "ì¸ë„ì", standing: false },
            { item: "ê²°ë‹¨ì˜ ê¸°ë„ (ê³µë™ê¸°ë„)", leader: "ë‹¤í•¨ê»˜", standing: true },
            { item: "íŒŒì†¡ì˜ ì°¬ì–‘ - ì‹­ìê°€ êµ°ë³‘ë“¤ì•„", leader: "ë‹¤í•¨ê»˜", standing: true },
            { item: "ì¶•ë„", leader: "ì¸ë„ì", standing: false }
        ];

        const initialFinancialItems = [
            { name: "ì£¼ì¼í—Œê¸ˆ", amount: "105,000ì›" },
            { name: "ì‹­ì¼ì¡°", amount: "860,000ì›" },
            { name: "ê°ì‚¬í—Œê¸ˆ", amount: "785,000ì›" },
            { name: "ë¹„ì „êµíšŒ í›„ì›ê¸ˆ", amount: "1,181,000ì›" },
            { name: "íŠ¹ë³„í—Œê¸ˆ", amount: "1,000,000ì›" }
        ];

        const initialNewsItems = [
            "ğŸ™ ì˜¤ëŠ˜ ì²˜ìŒ ë‚˜ì˜¤ì‹  ë¶„ë“¤ì„ ì£¼ë‹˜ì˜ ì´ë¦„ìœ¼ë¡œ í™˜ì˜í•©ë‹ˆë‹¤.",
            "ğŸ“… 9ì›” 1ì¼ ì¸ì²œ ë‚´ë¦¬êµíšŒì—ì„œ ì§€ë°©ëª©íšŒì ëª¨ì„ì´ ìˆì–´ ì¶œë„í•©ë‹ˆë‹¤.",
            "ğŸ™ ì €í¬ êµíšŒê°€ ëª©ì–‘, ì „ë„, êµ°ì„ êµ, ë¶í•œì„ êµë¥¼ ê°ë‹¹í•  ìˆ˜ ìˆë„ë¡ ê³„ì† ê¸°ë„ë¥¼ ë“œë¦½ì‹œë‹¤.",
            "ğŸ  ì´ë²ˆì£¼ ìˆ˜ìš”ì˜ˆë°°ëŠ” ì§‘ì—ì„œ ë§ì”€ì½ê¸°ì™€ ê¸°ë„ë¡œ ëŒ€ì‹ í•©ë‹ˆë‹¤.",
            "ğŸš­ ë°±ë ¹ë„ì— ê¸ˆì£¼ê¸ˆì—° ìš´ë™ì´ ì¼ì–´ë‚˜ë„ë¡ ê¸°ë„í•©ì‹œë‹¤."
        ];

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedData();
            loadWorshipItems();
            loadFinancialItems();
            loadNewsItems();
        });

        // ì €ì¥ëœ ë°ì´í„° ë¡œë“œ í•¨ìˆ˜
        function loadSavedData() {
            const savedData = localStorage.getItem('bulletinData');
            if (!savedData) return;
            
            const data = JSON.parse(savedData);
            
            // ê¸°ë³¸ ì •ë³´ ë¡œë“œ
            if (data.churchName) document.getElementById('churchName').value = data.churchName;
            if (data.churchSubtitle) document.getElementById('churchSubtitle').value = data.churchSubtitle;
            if (data.volume) document.getElementById('volume').value = data.volume;
            if (data.date) document.getElementById('date').value = data.date;
            if (data.pastor) document.getElementById('pastor').value = data.pastor;
            
            // ì˜ˆë°° ì •ë³´ ë¡œë“œ
            if (data.worshipTime) document.getElementById('worshipTime').value = data.worshipTime;
            if (data.worshipLeader) document.getElementById('worshipLeader').value = data.worshipLeader;
            if (data.scripture) document.getElementById('scripture').value = data.scripture;
            if (data.sermon) document.getElementById('sermon').value = data.sermon;
            
            // í—Œê¸ˆ ì •ë³´ ë¡œë“œ
            if (data.financialMonth) document.getElementById('financialMonth').value = data.financialMonth;
            if (data.bankAccount) document.getElementById('bankAccount').value = data.bankAccount;
            
            // ì—°ë½ì²˜ ì •ë³´ ë¡œë“œ
            if (data.address) document.getElementById('address').value = data.address;
            if (data.phone) document.getElementById('phone').value = data.phone;
            if (data.mobile) document.getElementById('mobile').value = data.mobile;
            if (data.established) document.getElementById('established').value = data.established;
            
            // ë™ì  í•­ëª©ë“¤ì€ ê°ê°ì˜ ë¡œë“œ í•¨ìˆ˜ì—ì„œ ì²˜ë¦¬
            if (data.worshipItems) {
                // ê¸°ì¡´ ì´ˆê¸° ë°ì´í„° ëŒ€ì‹  ì €ì¥ëœ ë°ì´í„° ì‚¬ìš©
                window.savedWorshipItems = data.worshipItems;
            }
            if (data.financialItems) {
                window.savedFinancialItems = data.financialItems;
            }
            if (data.newsItems) {
                window.savedNewsItems = data.newsItems;
            }
        }

        // ì˜ˆë°° ìˆœì„œ ë¡œë“œ
        function loadWorshipItems() {
            const container = document.getElementById('worshipItems');
            container.innerHTML = '';
            
            // ì €ì¥ëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ì´ˆê¸° ë°ì´í„° ì‚¬ìš©
            const itemsToLoad = window.savedWorshipItems || initialWorshipItems;
            
            itemsToLoad.forEach((item, index) => {
                addWorshipItemWithData(item, index);
            });
        }

        // ì˜ˆë°° ìˆœì„œ ì¶”ê°€ (ë°ì´í„° í¬í•¨)
        function addWorshipItemWithData(data, index) {
            const container = document.getElementById('worshipItems');
            const div = document.createElement('div');
            div.className = 'worship-item';
            div.innerHTML = `
                <input type="text" name="worshipItem_${index}" value="${data.item}" placeholder="ì˜ˆë°° ìˆœì„œ">
                <input type="text" name="worshipLeader_${index}" value="${data.leader}" placeholder="ì¸ë„ì">
                <label><input type="checkbox" name="worshipStanding_${index}" ${data.standing ? 'checked' : ''}> ê¸°ë¦½</label>
                <button type="button" class="remove-btn" onclick="removeWorshipItem(this)">ì‚­ì œ</button>
            `;
            container.appendChild(div);
        }

        // ì˜ˆë°° ìˆœì„œ ì¶”ê°€ (ë¹ˆ í•­ëª©)
        function addWorshipItem() {
            const container = document.getElementById('worshipItems');
            const index = container.children.length;
            const div = document.createElement('div');
            div.className = 'worship-item';
            div.innerHTML = `
                <input type="text" name="worshipItem_${index}" placeholder="ì˜ˆë°° ìˆœì„œ">
                <input type="text" name="worshipLeader_${index}" placeholder="ì¸ë„ì">
                <label><input type="checkbox" name="worshipStanding_${index}"> ê¸°ë¦½</label>
                <button type="button" class="remove-btn" onclick="removeWorshipItem(this)">ì‚­ì œ</button>
            `;
            container.appendChild(div);
        }

        // ì˜ˆë°° ìˆœì„œ ì‚­ì œ
        function removeWorshipItem(button) {
            button.parentElement.remove();
        }

        // í—Œê¸ˆ í•­ëª© ë¡œë“œ
        function loadFinancialItems() {
            const container = document.getElementById('financialItems');
            container.innerHTML = '';
            
            // ì €ì¥ëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ì´ˆê¸° ë°ì´í„° ì‚¬ìš©
            const itemsToLoad = window.savedFinancialItems || initialFinancialItems;
            
            itemsToLoad.forEach((item, index) => {
                addFinancialItemWithData(item, index);
            });
        }

        // í—Œê¸ˆ í•­ëª© ì¶”ê°€ (ë°ì´í„° í¬í•¨)
        function addFinancialItemWithData(data, index) {
            const container = document.getElementById('financialItems');
            const div = document.createElement('div');
            div.className = 'financial-item';
            div.innerHTML = `
                <input type="text" name="financialName_${index}" value="${data.name}" placeholder="í—Œê¸ˆ í•­ëª©">
                <input type="text" name="financialAmount_${index}" value="${data.amount}" placeholder="ê¸ˆì•¡">
                <button type="button" class="remove-btn" onclick="removeFinancialItem(this)">ì‚­ì œ</button>
            `;
            container.appendChild(div);
        }

        // í—Œê¸ˆ í•­ëª© ì¶”ê°€ (ë¹ˆ í•­ëª©)
        function addFinancialItem() {
            const container = document.getElementById('financialItems');
            const index = container.children.length;
            const div = document.createElement('div');
            div.className = 'financial-item';
            div.innerHTML = `
                <input type="text" name="financialName_${index}" placeholder="í—Œê¸ˆ í•­ëª©">
                <input type="text" name="financialAmount_${index}" placeholder="ê¸ˆì•¡">
                <button type="button" class="remove-btn" onclick="removeFinancialItem(this)">ì‚­ì œ</button>
            `;
            container.appendChild(div);
        }

        // í—Œê¸ˆ í•­ëª© ì‚­ì œ
        function removeFinancialItem(button) {
            button.parentElement.remove();
        }

        // êµíšŒ ì†Œì‹ ë¡œë“œ
        function loadNewsItems() {
            const container = document.getElementById('newsItems');
            container.innerHTML = '';
            
            // ì €ì¥ëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ì´ˆê¸° ë°ì´í„° ì‚¬ìš©
            const itemsToLoad = window.savedNewsItems || initialNewsItems;
            
            itemsToLoad.forEach((item, index) => {
                addNewsItemWithData(item, index);
            });
        }

        // êµíšŒ ì†Œì‹ ì¶”ê°€ (ë°ì´í„° í¬í•¨)
        function addNewsItemWithData(data, index) {
            const container = document.getElementById('newsItems');
            const div = document.createElement('div');
            div.className = 'news-item';
            div.innerHTML = `
                <textarea name="newsItem_${index}" placeholder="êµíšŒ ì†Œì‹ ë‚´ìš©">${data}</textarea>
                <button type="button" class="remove-btn" onclick="removeNewsItem(this)">ì‚­ì œ</button>
            `;
            container.appendChild(div);
        }

        // êµíšŒ ì†Œì‹ ì¶”ê°€ (ë¹ˆ í•­ëª©)
        function addNewsItem() {
            const container = document.getElementById('newsItems');
            const index = container.children.length;
            const div = document.createElement('div');
            div.className = 'news-item';
            div.innerHTML = `
                <textarea name="newsItem_${index}" placeholder="êµíšŒ ì†Œì‹ ë‚´ìš©"></textarea>
                <button type="button" class="remove-btn" onclick="removeNewsItem(this)">ì‚­ì œ</button>
            `;
            container.appendChild(div);
        }

        // êµíšŒ ì†Œì‹ ì‚­ì œ
        function removeNewsItem(button) {
            button.parentElement.remove();
        }

        // í¼ ì œì¶œ ì²˜ë¦¬
        document.getElementById('bulletinForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // í¼ ë°ì´í„° ìˆ˜ì§‘
            const formData = new FormData(this);
            const data = {};
            
            // ê¸°ë³¸ ì •ë³´ ìˆ˜ì§‘
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // ì˜ˆë°° ìˆœì„œ ìˆ˜ì§‘
            data.worshipItems = [];
            const worshipContainer = document.getElementById('worshipItems');
            Array.from(worshipContainer.children).forEach((item, index) => {
                const itemText = item.querySelector(`input[name="worshipItem_${index}"]`).value;
                const leader = item.querySelector(`input[name="worshipLeader_${index}"]`).value;
                const standing = item.querySelector(`input[name="worshipStanding_${index}"]`).checked;
                
                if (itemText) {
                    data.worshipItems.push({ item: itemText, leader: leader, standing: standing });
                }
            });
            
            // í—Œê¸ˆ í•­ëª© ìˆ˜ì§‘
            data.financialItems = [];
            const financialContainer = document.getElementById('financialItems');
            Array.from(financialContainer.children).forEach((item, index) => {
                const name = item.querySelector(`input[name="financialName_${index}"]`).value;
                const amount = item.querySelector(`input[name="financialAmount_${index}"]`).value;
                
                if (name && amount) {
                    data.financialItems.push({ name: name, amount: amount });
                }
            });
            
            // êµíšŒ ì†Œì‹ ìˆ˜ì§‘
            data.newsItems = [];
            const newsContainer = document.getElementById('newsItems');
            Array.from(newsContainer.children).forEach((item, index) => {
                const content = item.querySelector(`textarea[name="newsItem_${index}"]`).value;
                
                if (content) {
                    data.newsItems.push(content);
                }
            });
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            localStorage.setItem('bulletinData', JSON.stringify(data));
            
            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            const successMessage = document.getElementById('successMessage');
            successMessage.style.display = 'block';
            
            // 3ì´ˆ í›„ ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
            setTimeout(() => {
                successMessage.style.display = 'none';
            }, 3000);
            
            // í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>
